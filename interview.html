<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SeekersDen Interview Tool</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        'brand-orange': '#F2994A',
                        'brand-orange-hover': '#e08330',
                        'brand-dark': '#161616',
                        'brand-darker': '#0d0d0d',
                        'brand-gray': '#2c2e31',
                    },
                    fontFamily: {
                        mono: ['"Fira Code"', 'monospace'],
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <style>
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #161616;
        }

        ::-webkit-scrollbar-thumb {
            background: #333;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #F2994A;
        }

        .tab-content {
            animation: fadeIn 0.3s ease-in-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(5px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>

<body class="bg-brand-darker text-gray-200 font-sans h-screen flex flex-col overflow-hidden items-center p-4 sm:p-8">

    <div
        class="w-full max-w-5xl h-full flex flex-col bg-brand-dark border border-gray-800 shadow-2xl rounded-xl overflow-hidden relative">

        <header class="bg-brand-dark border-b border-gray-800 h-16 flex items-center px-6 shadow-lg z-10 shrink-0">
            <div class="flex items-center gap-4">
                <img src="assets/seekersden-logo.png" style="height: 48px; width: auto;" alt="SeekersDen Logo"
                    onerror="this.src='https://via.placeholder.com/48?text=SD'">
                <h1 class="text-xl font-bold tracking-wide">SeekersDen <span
                        class="text-brand-orange font-normal">Interview Tool</span></h1>
            </div>
        </header>

        <div class="bg-brand-dark border-b border-gray-800 h-12 flex items-center px-6 shrink-0">
            <nav class="flex w-full max-w-4xl mx-auto">
                <ul class="flex w-full justify-between items-center text-sm">
                    <li id="step-1" onclick="app.switchTab('config', 1)"
                        class="step-item text-brand-orange font-semibold flex items-center gap-2 cursor-pointer">
                        <span
                            class="w-6 h-6 rounded-full border-2 border-brand-orange flex items-center justify-center text-xs">1</span>
                        Select Topic
                    </li>
                    <li class="h-px bg-gray-700 flex-1 mx-4"></li>
                    <li id="step-2" class="step-item text-gray-500 flex items-center gap-2">
                        <span
                            class="w-6 h-6 rounded-full border-2 border-gray-500 flex items-center justify-center text-xs">2</span>
                        Assessment
                    </li>
                    <li class="h-px bg-gray-700 flex-1 mx-4"></li>
                    <li id="step-3" class="step-item text-gray-500 flex items-center gap-2">
                        <span
                            class="w-6 h-6 rounded-full border-2 border-gray-500 flex items-center justify-center text-xs">3</span>
                        Results
                    </li>
                    <li class="h-px bg-gray-700 flex-1 mx-4"></li>
                    <li id="step-4" class="step-item text-gray-500 flex items-center gap-2">
                        <span
                            class="w-6 h-6 rounded-full border-2 border-gray-500 flex items-center justify-center text-xs">4</span>
                        Deep Dive
                    </li>
                </ul>
            </nav>
        </div>

        <main class="flex-1 overflow-hidden relative w-full">
            <div id="tab-config" class="absolute inset-0 flex flex-col tab-content">
                <div class="flex-1 overflow-y-auto p-6">
                    <div class="max-w-3xl mx-auto">
                        <h2 class="text-2xl font-bold mb-2">Select Assessment Topic</h2>
                        <p class="text-gray-400 mb-8">Choose a specialized technical topic to generate a focused
                            assessment session.</p>
                        <div id="accordion-container" class="space-y-3 pb-8"></div>
                    </div>
                </div>
                <div class="bg-brand-dark p-4 border-t border-gray-800 shrink-0 flex justify-end">
                    <div class="max-w-3xl w-full mx-auto flex justify-end">
                        <button id="btn-start" disabled onclick="app.startAssessment()"
                            class="bg-gray-700 text-white px-8 py-3 rounded font-semibold transition-all opacity-50 cursor-not-allowed">
                            Start Session
                        </button>
                    </div>
                </div>
            </div>

            <div id="tab-assessment" class="absolute inset-0 overflow-y-auto p-6 hidden bg-brand-dark tab-content">
                <div class="max-w-3xl mx-auto pb-20">
                    <button onclick="app.switchTab('config', 1)"
                        class="mb-4 text-sm text-gray-500 hover:text-white flex items-center gap-2 transition-colors">
                        <span>&larr;</span> Change Topic
                    </button>
                    <div class="flex justify-between items-end mb-6 border-b border-gray-800 pb-4">
                        <div>
                            <h2 class="text-xl font-bold text-white" id="assessment-title">Topic</h2>
                            <p class="text-sm text-brand-orange mt-1">10 Questions • Technical Aptitude</p>
                        </div>
                        <div class="text-right">
                            <span class="text-xs text-gray-400 uppercase tracking-wider">Progress</span>
                            <div class="text-lg font-mono" id="progress-indicator">0/10</div>
                        </div>
                    </div>
                    <div id="questions-container" class="space-y-12"></div>
                    <div class="mt-12 pt-8 border-t border-gray-800 text-center">
                        <button onclick="app.submitAssessment()"
                            class="bg-brand-orange hover:bg-brand-orange-hover text-white px-12 py-4 rounded font-bold text-lg shadow-lg transform transition hover:scale-105">
                            Submit Answers
                        </button>
                    </div>
                </div>
            </div>

            <div id="tab-results" class="absolute inset-0 overflow-y-auto p-6 hidden tab-content">
                <div class="max-w-4xl mx-auto">
                    <div class="bg-brand-gray rounded-lg p-8 text-center mb-8 border border-gray-600 shadow-xl">
                        <h2 class="text-gray-400 text-sm uppercase tracking-widest mb-2">Score</h2>
                        <div class="text-6xl font-bold text-white mb-2" id="final-score">0/10</div>
                        <div class="text-xl text-brand-orange mb-6" id="score-message"> proficiency</div>
                        <button onclick="app.goToReview()"
                            class="bg-white text-brand-dark px-6 py-2 rounded font-semibold hover:bg-gray-200">
                            View Explanations
                        </button>
                    </div>
                    <h3 class="text-xl font-bold mb-4 border-b border-gray-700 pb-2">Topic Breakdown</h3>
                    <div class="bg-brand-gray rounded-lg overflow-hidden border border-gray-600">
                        <table class="w-full text-left border-collapse">
                            <thead class="bg-brand-dark text-gray-400 text-xs uppercase">
                                <tr>
                                    <th class="p-4 border-b border-gray-600">#</th>
                                    <th class="p-4 border-b border-gray-600 text-topic">Concept</th>
                                    <th class="p-4 border-b border-gray-600 text-center">Result</th>
                                    <th class="p-4 border-b border-gray-600 text-right">Review</th>
                                </tr>
                            </thead>
                            <tbody id="results-table-body" class="text-sm"></tbody>
                        </table>
                    </div>
                    <div class="mt-8 text-center">
                        <button onclick="location.reload()" class="text-gray-400 hover:text-white underline">Start New
                            Session</button>
                    </div>
                </div>
            </div>

            <div id="tab-review" class="absolute inset-0 overflow-y-auto p-6 hidden tab-content">
                <div class="max-w-3xl mx-auto pb-20">
                    <div class="flex items-center gap-4 mb-8">
                        <button onclick="app.switchTab('results')" class="text-gray-400 hover:text-white">&larr;
                            Back</button>
                        <h2 class="text-2xl font-bold text-white">Technical Explanations</h2>
                    </div>
                    <div id="review-container" class="space-y-8"></div>
                    <div class="mt-12 text-center">
                        <button onclick="location.reload()"
                            class="bg-brand-orange text-white px-8 py-3 rounded font-bold">New Assessment</button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <div class="mt-4 text-center shrink-0">
        <a href="https://www.seekersden.in" target="_blank"
            class="text-gray-600 hover:text-brand-orange transition-colors duration-200 text-sm sm:text-base tracking-wide no-underline font-mono">www.seekersden.in</a>
    </div>

    <script src="questions.js"></script>
    <script>
        // === 1. TOPIC HIERARCHY ===
        const TOPICS = [
            // --- SECTION 1: C & C++ FOUNDATIONS ---
            { id: "c_essentials", section: "C & C++ FOUNDATIONS", title: "1. C Programming: Essentials", subs: ["Data Types & Sizes", "Storage Classes", "Bitwise Operations", "Structs & Unions", "Enums", "Macros", "Const Correctness", "Type Casting", "Variadic Functions", "Error Handling"] },
            { id: "c_memory", title: "2. C Programming: Pointers & Memory", subs: ["Pointer Arithmetic", "Function Pointers", "Void Pointers", "Arrays vs Pointers", "Stack vs Heap", "Memory Leaks", "Dangling Pointers", "Buffer Overflows", "Dynamic Allocation", "Padding/Packing"] },
            { id: "cpp_oop", title: "3. C++: Object Oriented Programming", subs: ["Classes", "Constructors", "Inheritance", "Polymorphism", "Encapsulation", "Operator Overloading", "Abstract Classes", "Static Members", "Friend Functions", "V-Table Internals"] },
            { id: "cpp_stl", title: "4. C++: Modern & STL", subs: ["Smart Pointers", "Lambda Expressions", "Move Semantics", "Templates", "STL Containers", "Iterators", "RAII Pattern", "Exception Handling", "Type Inference", "Concurrency"] },
            { id: "bare_metal", title: "5. Microcontroller Architecture", subs: ["Interrupts & ISRs", "GPIO", "Timers", "ADC/DAC", "DMA", "Watchdog", "Boot Sequence", "Clock Trees", "Power Modes", "Registers"] },

            // --- SECTION 2: EMBEDDED SYSTEM DESIGN ---
            { id: "protocols", section: "EMBEDDED SYSTEM DESIGN", title: "6. Embedded Communication Protocols", subs: ["UART", "I2C", "SPI", "CAN Bus", "USB", "Ethernet", "Modbus", "Serial Debugging", "Signal Integrity", "Bus Arbitration"] },
            { id: "rtos", title: "7. Real-Time Operating Systems (RTOS)", subs: ["Scheduling", "Context Switching", "Stack Overflow", "Mutex vs Semaphore", "Message Queues", "Priority Inversion", "Deadlocks", "Event Groups", "Software Timers", "Critical Sections"] },
            { id: "linux_kernel", title: "8. Embedded Linux: Kernel Space", subs: ["Kernel Modules", "Device Tree", "Character Drivers", "Interrupt Handling", "Synchronization", "Memory Management", "Sysfs/Procfs", "Platform Drivers", "Bootloaders (U-Boot)", "Kernel Build"] },
            { id: "linux_user", title: "9. Embedded Linux: User Space", subs: ["System Calls", "Multi-threading (pthreads)", "IPC", "Sockets", "File I/O", "Signals", "Shared Memory", "Daemons", "Cross-Compilation", "GDB"] },
            { id: "emerging", title: "10. Emerging Tech (Rust & Python)", subs: ["Rust Ownership", "Rust Lifetimes", "Rust Unsafe Code", "Rust Option/Result", "Python Hardware Access", "Python Unit Testing", "Python Data Parsing", "MicroPython Basics", "FFI", "Build Systems"] },

            // --- SECTION 3: ADVANCED TOPICS ---
            { id: "patterns", section: "ADVANCED TOPICS", title: "11. Design Patterns for Embedded Systems", subs: ["State Machines", "Producer-Consumer", "Mediator Pattern", "Anti-Patterns", "Pub-Sub Pattern", "Hardware Proxies", "SOLID Principles", "Super-Loop vs OS", "UI Patterns (MVC)", "Reliability Patterns"] },
            { id: "build_process", title: "12. Build Process & Toolchains", subs: ["Preprocessing & Linking", "Makefiles & CMake", "Cross-Compilation Flow", "Linker Scripts (.ld)", "Startup Code (crt0)", "ABI & EABI", "Map File Analysis", "Libc Integration", "Optimizaton Flags", "Bootloaders"] },
            { id: "memory_mgmt", title: "13. Memory Management Strategies", subs: ["Static vs Dynamic", "MPU & MMU", "Alignment & Padding", "Stack Painting", "Buffer Overflows", "Volatile & Barriers", "DMA Management", "Cache Coherency", "Serialization", "ECC & Integrity"] },
            { id: "debug_test", title: "14. Debugging & Testing", subs: ["JTAG & SWD", "Oscilloscopes & Logic Analyzers", "Unit Testing (Unity)", "Printf & Logging", "Mocking & Faking", "Code Coverage (Gcov)", "Performance Profiling", "Logic Decoding", "Electrical Debugging", "Heisenbugs"] },
            { id: "safety", title: "15. Safety Critical Systems", subs: ["MISRA C", "ISO 26262 & ASIL", "Code Coverage (MCDC)", "Failure Analysis (FMEA)", "Partitioning", "Tool Qualification", "Coding Rules", "Fault Tolerance", "Hardware Monitors", "Safety Culture"] },

            // --- SECTION 4: FUTURE PLACEHOLDERS (To be generated) ---
            { id: "iot_cloud", section: "IOT & CONNECTIVITY", title: "16. IoT Connectivity", subs: ["IoT Architecture", "MQTT Protocol", "CoAP Protocol", "REST & HTTP", "WiFi & ESP32", "BLE & GATT", "LoRaWAN", "Cellular IoT", "Mesh Networking", "Cloud Platforms"] },
            { id: "security", title: "17. Embedded Security", subs: ["CIA & Threats", "Cryptography Basics", "Hashing & Signatures", "Secure Boot & Chain", "TrustZone & TEE", "HSM & TPM Keys", "TLS & DTLS", "Attacks (Side-Channel)", "Key Management", "Physical Security"] },
            { id: "dsp", title: "18. Digital Signal Processing", subs: ["Nyquist & FFT", "Convolution & FIR", "IIR & Filters", "Math & Algorithms", "SDR & Radio", "PID Control", "Sensor Fusion", "Audio Processing", "Image Processing", "TinyML"] },
            { id: "motors", title: "19. Motor Control", subs: ["Motor Types", "DC Control", "BLDC & Commutation", "H-Bridge & Drivers", "FOC Vector Control", "SVPWM Modulation", "Encoders & Sensing", "Stepper Motors", "Control Loops", "Protection & Safety"] },
            { id: "low_power", title: "20. Low Power Design", subs: ["Sleep Modes", "Wakeup Sources", "Run Modes", "Power Domains", "Battery Tech", "Energy Harvesting", "ULP MCUs", "Current Measurement", "Code Optimization", "Leakage & HW"] },
            { id: "fpga", title: "21. FPGA & Hardware Logic", subs: ["FPGA vs ASIC", "Verilog & VHDL", "Combinational Logic", "Sequential Logic", "FSM Machines", "Static Timing", "Clock Domains", "DSP & RAM", "Testbenches", "Synthesis & PAR"] },
            { id: "wireless", title: "22. Wireless Profiles (BLE/LoRa)", subs: ["Wireless Basics", "BLE Basics", "Profiles & Services", "PHY & Link Layer", "BLE Security", "LoRa Basics", "LoRaWAN Arch", "LoRa Modulation", "Zigbee & Thread", "Antenna & Matching"] },
            { id: "bootloaders", title: "23. Advanced Bootloaders (OTA)", subs: ["Bootloader Basics", "Reset & Startup", "Memory Layout", "Flash Operations", "UART/Serial Proto", "Dual Bank OTA", "FW Encryption", "Secure Boot", "Recovery Mode", "OTA & Cloud"] },
            { id: "interview_soft", title: "24. Soft Skills & System Design", subs: ["Requirements", "Architecture", "Components", "Power Budget", "BOM & Cost", "Project Mgmt", "Code Review", "Debugging", "Documentation", "Career & Tips"] }
        ];

        const app = {
            state: { topicId: null, subIndex: null, topicName: null, questions: [], answers: {}, score: 0 },
            init: function () { this.renderMenu(); },
            renderMenu: function () {
                const container = document.getElementById('accordion-container');
                let html = '';
                TOPICS.forEach((topic) => {
                    if (topic.section) html += `<div class="mt-8 mb-3 flex items-center gap-2"><div class="h-px bg-brand-orange flex-1 opacity-50"></div><span class="text-brand-orange text-xs font-bold uppercase tracking-widest px-2">${topic.section}</span><div class="h-px bg-brand-orange flex-1 opacity-50"></div></div>`;
                    html += `<div class="border border-gray-700 rounded bg-brand-gray overflow-hidden mb-3"><button onclick="app.toggleAccordion('${topic.id}')" class="w-full flex items-center justify-between p-4 text-left hover:bg-[#383a3d] transition-colors"><span class="font-bold text-lg text-white">${topic.title}</span><span id="icon-${topic.id}" class="text-gray-400 transform transition-transform duration-200">▼</span></button><div id="content-${topic.id}" class="hidden bg-brand-darker border-t border-gray-700"><div class="p-4 grid grid-cols-1 md:grid-cols-2 gap-3">${topic.subs.map((sub, idx) => `<label class="flex items-center space-x-3 cursor-pointer p-2 rounded hover:bg-gray-800 border border-transparent hover:border-gray-600 transition"><input type="radio" name="subtopic" value="${topic.id}|${idx}" onchange="app.selectTopic(this.value)" class="form-radio text-brand-orange h-4 w-4 bg-gray-700 border-gray-500 focus:ring-brand-orange"><span class="text-gray-300 text-sm">${sub}</span></label>`).join('')}</div></div></div>`;
                });
                container.innerHTML = html;
            },
            toggleAccordion: function (id) {
                const content = document.getElementById(`content-${id}`);
                const icon = document.getElementById(`icon-${id}`);
                document.querySelectorAll('[id^="content-"]').forEach(el => { if (el.id !== `content-${id}`) el.classList.add('hidden'); });
                document.querySelectorAll('[id^="icon-"]').forEach(el => { if (el.id !== `icon-${id}`) el.style.transform = 'rotate(0deg)'; });
                const isHidden = content.classList.contains('hidden');
                content.classList.toggle('hidden');
                icon.style.transform = isHidden ? 'rotate(180deg)' : 'rotate(0deg)';
            },
            selectTopic: function (value) {
                const [majorId, subIdx] = value.split('|');
                const topic = TOPICS.find(t => t.id === majorId);
                const subName = topic.subs[parseInt(subIdx)];
                this.state.topicId = majorId;
                this.state.subIndex = subIdx;
                this.state.topicName = `${topic.title}: ${subName}`;
                const btn = document.getElementById('btn-start');
                btn.disabled = false;
                btn.classList.remove('opacity-50', 'cursor-not-allowed');
                btn.classList.add('bg-brand-orange', 'hover:bg-brand-orange-hover');
                btn.innerText = `Start Session: ${subName}`;
            },
            startAssessment: function () {
                const lookupKey = `${this.state.topicId}_${this.state.subIndex}`;
                const dbQ = QUESTIONS_DB[lookupKey];
                if (!dbQ || dbQ.length === 0) {
                    alert("Error: Question bank missing for this topic. Architecture is ready for data entry.");
                    return;
                }
                this.state.questions = JSON.parse(JSON.stringify(dbQ));
                this.state.answers = {};
                document.getElementById('assessment-title').innerText = this.state.topicName;
                this.renderQuestions();
                this.switchTab('assessment', 2);
            },
            renderQuestions: function () {
                const container = document.getElementById('questions-container');
                container.innerHTML = this.state.questions.map((q, idx) => `<div class="bg-brand-gray rounded-lg p-6 border border-gray-700 shadow-lg relative"><span class="absolute top-0 left-0 bg-gray-700 text-xs px-2 py-1 rounded-br text-gray-300">Q${idx + 1}</span><div class="mt-2 mb-4"><h3 class="text-lg font-medium text-gray-100">${q.text}</h3></div><div class="space-y-3 mt-6">${q.options.map((opt, i) => `<label class="flex items-start p-3 rounded cursor-pointer border border-gray-600 hover:border-brand-orange hover:bg-gray-800 transition-all group" onclick="app.recordAnswer(${q.id}, ${i}, this)"><div class="flex items-center h-5"><div class="w-5 h-5 rounded-full border border-gray-400 group-hover:border-brand-orange flex items-center justify-center mr-3 radio-indicator"><div class="w-2.5 h-2.5 rounded-full bg-brand-orange opacity-0 transition-opacity"></div></div></div><span class="text-sm text-gray-300 group-hover:text-white select-none">${opt}</span></label>`).join('')}</div></div>`).join('');
                this.updateProgress();
            },
            recordAnswer: function (qId, optIdx, el) {
                this.state.answers[qId] = optIdx;
                const parent = el.parentElement;
                parent.querySelectorAll('.radio-indicator div').forEach(d => d.classList.add('opacity-0'));
                parent.querySelectorAll('label').forEach(l => l.classList.remove('bg-gray-700', 'border-brand-orange'));
                el.querySelector('.radio-indicator div').classList.remove('opacity-0');
                el.classList.add('bg-gray-700', 'border-brand-orange');
                this.updateProgress();
            },
            updateProgress: function () {
                const count = Object.keys(this.state.answers).length;
                document.getElementById('progress-indicator').innerText = `${count}/10`;
            },
            submitAssessment: function () {
                if (Object.keys(this.state.answers).length < 10 && !confirm("Submit partial answers?")) return;
                let score = 0;
                this.state.questions.forEach(q => { if (this.state.answers[q.id] === q.correct) score++; });
                document.getElementById('final-score').innerText = `${score}/10`;
                document.getElementById('score-message').innerText = score > 8 ? "Expert Proficiency" : score > 5 ? "Intermediate Proficiency" : "Foundational Proficiency";
                this.renderResults();
                this.switchTab('results', 3);
            },
            renderResults: function () {
                const tbody = document.getElementById('results-table-body');
                const reviewContainer = document.getElementById('review-container');
                let tableHtml = ''; let reviewHtml = '';
                this.state.questions.forEach((q, idx) => {
                    const isCorrect = this.state.answers[q.id] === q.correct;
                    const statusClass = isCorrect ? "bg-green-900 text-green-300" : "bg-red-900 text-red-300";
                    const statusText = isCorrect ? "Correct" : "Incorrect";
                    tableHtml += `<tr class="border-b border-gray-700 hover:bg-gray-800 transition"><td class="p-4 text-gray-400">Q${idx + 1}</td><td class="p-4 font-medium text-white truncate max-w-xs">${q.text}</td><td class="p-4 text-center"><span class="${statusClass} text-xs px-2 py-1 rounded">${statusText}</span></td><td class="p-4 text-right"><button onclick="app.goToReviewItem(${idx})" class="text-brand-orange hover:text-white text-xs underline">Review</button></td></tr>`;
                    reviewHtml += `<div id="review-item-${idx}" class="bg-brand-gray rounded-lg border border-gray-700 overflow-hidden"><div class="p-4 border-b border-gray-700 flex justify-between bg-gray-800"><span class="font-bold text-gray-300">Question ${idx + 1}</span><span class="${isCorrect ? 'text-green-400' : 'text-red-400'} text-xl">${isCorrect ? '✔' : '✘'}</span></div><div class="p-6"><p class="mb-4 text-lg text-white">${q.text}</p><div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6"><div class="p-3 rounded border ${isCorrect ? 'border-green-800 bg-green-900/20' : 'border-red-800 bg-red-900/20'}"><div class="text-xs uppercase text-gray-500 mb-1">Your Answer</div><div class="${isCorrect ? 'text-green-400' : 'text-red-400'}">${this.state.answers[q.id] !== undefined ? q.options[this.state.answers[q.id]] : 'Skipped'}</div></div><div class="p-3 rounded border border-gray-600 bg-gray-800/50"><div class="text-xs uppercase text-gray-500 mb-1">Correct Answer</div><div class="text-white">${q.options[q.correct]}</div></div></div><div class="bg-blue-900/20 border-l-4 border-blue-500 p-4 rounded-r"><h4 class="text-blue-400 text-sm font-bold uppercase mb-1">Technical Explanation</h4><p class="text-sm text-gray-300 leading-relaxed">${q.explanation}</p></div></div></div>`;
                });
                tbody.innerHTML = tableHtml; reviewContainer.innerHTML = reviewHtml;
            },
            switchTab: function (tabName, stepNum) {
                document.querySelectorAll('.tab-content').forEach(el => el.classList.add('hidden'));
                document.getElementById(`tab-${tabName}`).classList.remove('hidden');
                if (stepNum) {
                    document.querySelectorAll('.step-item').forEach((el, idx) => {
                        const circle = el.querySelector('span');
                        if (idx + 1 < stepNum) { el.className = "step-item text-green-500 flex items-center gap-2 cursor-pointer hover:opacity-80"; circle.className = "w-6 h-6 rounded-full border-2 border-green-500 flex items-center justify-center text-xs bg-green-500 text-brand-darker font-bold"; circle.innerText = "✓"; }
                        else if (idx + 1 === stepNum) { el.className = "step-item text-brand-orange font-semibold flex items-center gap-2"; circle.className = "w-6 h-6 rounded-full border-2 border-brand-orange flex items-center justify-center text-xs bg-brand-orange text-brand-darker font-bold"; circle.innerText = idx + 1; }
                        else { el.className = "step-item text-gray-500 flex items-center gap-2"; circle.className = "w-6 h-6 rounded-full border-2 border-gray-500 flex items-center justify-center text-xs"; circle.innerText = idx + 1; }
                    });
                }
            },
            goToReview: function () { this.switchTab('review', 4); },
            goToReviewItem: function (idx) { this.switchTab('review', 4); setTimeout(() => { document.getElementById(`review-item-${idx}`).scrollIntoView({ behavior: 'smooth' }); }, 100); }
        };
        document.addEventListener('DOMContentLoaded', () => app.init());
    </script>
</body>

</html>